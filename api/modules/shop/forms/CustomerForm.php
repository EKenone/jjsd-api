<?php


namespace api\modules\shop\forms;


use api\modules\shop\models\Customer;
use common\traits\FormModelValidate;

class CustomerForm extends Customer
{
    use FormModelValidate;

    const CREATE_CUSTOMER_AND_ADDRESS = 'create_customer_and_address';

    public $address;

    /**
     * @return array|array[]
     */
    public function rules()
    {
        return [
            [['id', 'name', 'shop_id'], 'required'],
            [['phone'], 'uniqNotDel'],
            [['phone'], 'checkPhone'],
            [['loc_number'], 'checkLocNumber'],
            [['wx'], 'checkWxId'],
            [['wx', 'loc_number', 'phone', 'address'], 'default', 'value' => '']
        ];
    }

    /**
     * @return array|array[]
     */
    public function scenarios()
    {
        return array_merge(parent::scenarios(), [
            self::SCENARIO_STORE => ['shop_id', 'name', 'phone', 'wx', 'loc_number'],
            self::SCENARIO_UPDATE => ['id', 'name', 'phone', 'wx', 'loc_number'],
            self::CREATE_CUSTOMER_AND_ADDRESS => ['shop_id', 'name', 'phone', 'wx', 'loc_number', 'address'],
            self::SCENARIO_DESTROY => ['id'],
        ]); // TODO: Change the autogenerated stub
    }
}